var TimeValidator={validateTimeFormat(timeString){const regex=/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/;return regex.test(timeString)},validateTimeRange(fromTime,toTime){const[fromH,fromM]=fromTime.split(":").map(Number);const[toH,toM]=toTime.split(":").map(Number);const fromMinutes=fromH*60+fromM;const toMinutes=toH*60+toM;const submit_button=document.getElementById("service_form_service");if(fromMinutes>=toMinutes){return{isValid:false,error:'Значение "Время от" должно быть меньше значения "Время до"'}}return{isValid:true,error:null}},setupTimeValidation(formName,timeFrom,timeTo,index){const form=document.querySelector('[name="'+formName+'"]');const fromInput=document.querySelector('[name="'+timeFrom+'"]');const toInput=document.querySelector('[name="'+timeTo+'"]');const errorElement=document.querySelector(".time-error"+index);const validate=()=>{const result=this.validateTimeRange(fromInput.value,toInput.value);if(errorElement){errorElement.textContent=result.isValid?"":result.error;errorElement.style.display=result.isValid?"none":"block";const submit_button=document.getElementById("service_form_service");const time_errors=document.querySelectorAll(".time-error");for(const time_error of time_errors){if(time_error.style.display==="block"){submit_button.disabled=true;break}else{submit_button.disabled=false}}}return result.isValid};fromInput.addEventListener("change",validate);toInput.addEventListener("change",validate);return validate}};var cards=document.querySelectorAll(".card");for(let index=0;index<cards.length;index++){const res=TimeValidator.setupTimeValidation("service_form","service_form[period]["+index+"][frm]","service_form[period]["+index+"][upto]",index)}$addButtonPeriod=document.getElementById("periodAddCollection");if($addButtonPeriod){let $blockCollectionCall=document.getElementById("collection-period");if($blockCollectionCall){$addButtonPeriod.addEventListener("click",(function(){let $addButtonPeriod=this;let newForm=$addButtonPeriod.dataset.prototype;let index=$addButtonPeriod.dataset.index*1;newForm=newForm.replace(/__periods__/g,index);let div=document.createElement("div");div.id="item_service_form_period_"+index;div.classList.add("mb-3");div.classList.add("item-service");div.innerHTML=newForm;$blockCollectionCall.append(div);div.querySelector(".del-item-period")?.addEventListener("click",deletePeriod);const delButton=div.querySelector(".del-item-period");delButton.dataset.delete="item_service_form_period_"+index.toString();$addButtonPeriod.dataset.index=(index+1).toString();div.scrollIntoView({block:"center",inline:"center",behavior:"smooth"});{TimeValidator.setupTimeValidation("service_form","service_form[period]["+index+"][frm]","service_form[period]["+index+"][upto]",index)}}))}}document.querySelectorAll(".del-item-period").forEach((function(item){item.addEventListener("click",deletePeriod)}));function deletePeriod(){let services=document.querySelectorAll(".item-service").length;if(services>1){document.getElementById(this.dataset.delete).remove()}}